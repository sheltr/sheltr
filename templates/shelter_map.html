<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>Shelter Philadelphia</title>
		<script type="text/javascript" 	src="http://maps.google.com/maps/api/js?sensor=true"></script>

		<script type="text/javascript"> 
		var map;
		var infowindow = new google.maps.InfoWindow();
		var shelters = {'shelters': [{'lat':39.955,'lng':-75.173,'desc':'Shelter 1'},
									 {'lat':39.997,'lng':-75.153,'desc':'Shelter 2'},
									 {'lat':40,'lng':-75,'desc':'Shelter 3'}]};
	
		function initialize(){

			var options = { 
				zoom: 12, 
				center: new google.maps.LatLng(39.95240, -75.16362), 
				mapTypeId: google.maps.MapTypeId.ROADMAP 
			}; 

			map = new google.maps.Map(document.getElementById('map'), options);

			addShelters(shelters);
			
		}		

		//add shelters to map
		function addShelters (shelterCollection){
		
			for (var i=0; i<shelterCollection.shelters.length; i++) { 

				var lat = shelterCollection.shelters[i].lat;
				var lng = shelterCollection.shelters[i].lng;
				var latlng = new google.maps.LatLng(lat,lng);
					
				createMarker(latlng, shelterCollection.shelters[i].desc);

			}

		}

		//add marker to map
		function createMarker(latlng,text) {
			
			marker = new google.maps.Marker({
				position: latlng,
				map: map
			});

			google.maps.event.addListener(marker, 'click', function() {
				infowindow.close();
				infowindow.setContent(text);
				infowindow.open(map,marker);
			});
			
		}
		
		</script> 

		<style>
			html, body, #map {
				height: 100%;
				width: 100%;
				margin: 0;
				padding: 0;
			}
		</style> 
	</head>
	
	<body onload='initialize()'>
		<div id="map"></div>
	</body>

</html>